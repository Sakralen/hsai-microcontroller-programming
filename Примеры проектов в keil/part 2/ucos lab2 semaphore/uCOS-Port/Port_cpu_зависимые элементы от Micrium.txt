
	====  В данном файле описаны особенности Порта ОСРВ uCOS-II v2.86 ====
	
	Цель данного текста - объяснить учащимся основы разработки управляющей программы,
которая функционирует под управлением многозадачной ОСРВ uCOS-II v2.86 на МК
STM32F103RB от компании	ST Microelectronics.
	
	Термин "Порт", используемый в данном контексте это версия ОСРВ, адаптированная 
для работы на конкретной вычислительной системе. 



  Рассматриваемый в этом документе "Порт" был выполнен разработчиками ОСРВ uCOS-II для 
микроконтроллеров подсемейства STM32F103. Таким образом, данный "Порт" может рассматриваться
как образцово-показательный.
	Специализация "Порта" (только для STM32F103) объясняется тем, что портировщик(и) для 
начальной настроки схемотехники МК   НЕ использовали !!! универсальные настроечные файлы, 
рекомендуемые компанией-производителем ST Microelectronics, вот эти:
 
	startup_stm32f10x_md.s
	system_stm32f10x.c
	core_cm3.c
   
  Т.е. можно считать, что в этом примере использован Port ОС, разработанный именно
компанией Micrium -разработчиком uCOS, и, таким образом, может рассматриваться
как образцово-показательный. 

  В этом Port`е вместо перечисленных выше файлов начальной настройки
системы, рекомендуемых компанией-производителем МК STM32F103RB, 

начальная настройка сосредоточена в файлах:
	init.s			-- передача управления на начало функции main.c;
	vectors.s		-- определения, связанные с таблицей векторов прерываний;
	bsp.c			  -- много вызовов стандартных функций SPL;
	bsp_int.c		-- обработчики прерываний, и все, что с ними связано: 
					таблица псевдовекторов, универсальный вызыватель пользовательских
					функций-обработчиков (BSP_IntHandler() строка 377);
	bsp_periph.c	-- функции управления тактированием перифериию

     Вспомогательные файлы содержат фрагменты, выполняющие типовые действия:
Файл cpu.asm  	
        -- разрешение и запрет прерываний процессору,
				-- вход и выход из критической секции,
				-- сохранение и восстановление SR в лок.пер,
				-- обертка для четырех процессорных команд,
Файл cpu_c.c	
        -- работа с bit_bang областью,
				-- разрешение и запрет сигналов запроса в NVIC
				-- чтение/установка приоритетов в NVIC
в cpu.h и в cpu_def.h -- разные определения констант
  
   Стандартные файлы начальной настройки универсальны в том смысле, что позволяют
получать настроечный код для многих разных типов МК, в зависимости от того, какая строка 
раскомментирована в начальной части файла stm32f10x.h.
   В Порте от Micrium настройка в перечисленных выше файлах работает лишь для малого 
количества МК, поскольку при задании режимов подсистемы тактирования в начальной части
файла bsp.c  выполнены вызовы вполне определенных функций и заданы вполне определенные 
значения параметров. Например, для использования МК STM32F100RB вместо F103RB придется 
выполнять модификацию отдельных строк настроечной части кода.

   Пример такого изменения выполнен в строках 77...83 файла bsp.c, добавленные строки
отмечены в комментарии тегом <АПН!!>

Проект KB_uCOS, предназначенный для использования в качестве проекта-шаблона, сделан 
на основе стандартного примера от на МК STM32F103RB под ОСРВ uCOS-II v.2.86.




 
   